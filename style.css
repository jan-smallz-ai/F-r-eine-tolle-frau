:root{
  --bg1:#070b22;
  --bg2:#0a1b3d;
  --card:rgba(255,255,255,.06);
  --card2:rgba(255,255,255,.09);
  --text:#eaf1ff;
  --muted:rgba(234,241,255,.72);
  --gold:#ffd36a;
  --btn:#f3d37a;
  --btnText:#1a1406;
  --ring:rgba(255,211,106,.35);
  --shadow: 0 18px 50px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background: radial-gradient(1200px 700px at 70% 20%, #1c2c66 0%, transparent 55%),
              linear-gradient(180deg,var(--bg2),var(--bg1));
  overflow-x:hidden;
}

.bg{
  position:fixed; inset:0;
  background:
    radial-gradient(900px 500px at 20% 10%, rgba(255,211,106,.10), transparent 60%),
    radial-gradient(700px 400px at 85% 30%, rgba(120,190,255,.12), transparent 60%);
  pointer-events:none;
}

.wrap{max-width:820px; margin:0 auto; padding:18px 14px 28px}
.top{display:flex; gap:14px; align-items:flex-start}
.badge{width:46px;height:46px;border-radius:14px;background:rgba(255,211,106,.16);display:grid;place-items:center;box-shadow:var(--shadow)}
h1{margin:0; line-height:1.05; font-size:36px; letter-spacing:.3px}
.gold{color:var(--gold)}
.sub{margin:10px 0 0; color:var(--muted); max-width:46ch; font-size:15px}

.card{
  margin-top:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.10);
  border-radius:24px;
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}

.stage{padding:16px; min-height:560px}
@media (max-width:440px){ h1{font-size:32px} .stage{min-height:620px} }

.bubble{
  background: rgba(9,14,40,.72);
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  padding:12px 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  position:relative;
  backdrop-filter: blur(8px);
}
.bubble:after{
  content:"";
  position:absolute;
  left:22px; top:100%;
  width:0;height:0;
  border:10px solid transparent;
  border-top-color: rgba(9,14,40,.72);
  filter: drop-shadow(0 6px 8px rgba(0,0,0,.15));
}
.bubble-title{font-weight:800; letter-spacing:.3px}
.bubble-text{margin-top:6px; color:var(--muted); line-height:1.25}
.bubble-center{margin:0 auto; max-width:520px; text-align:center}
.bubble-center:after{left:50%; transform:translateX(-50%)}

.sky{
  margin-top:14px;
  height:320px;
  border-radius:22px;
  background: radial-gradient(1000px 420px at 70% 30%, rgba(120,190,255,.20), rgba(0,0,0,0) 60%),
              linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.10);
  position:relative;
  overflow:hidden;
}

.hint{
  margin-top:12px;
  text-align:center;
  color:rgba(234,241,255,.78);
  font-size:14px;
}

.rig{
  position:absolute;
  left:-520px; top:35px;
  width:520px; height:250px;
  background:transparent;
  border:0;
  padding:0;
  cursor:pointer;
  touch-action:manipulation;
  animation: fly 10s linear infinite;
}
.rig:focus{outline:3px solid var(--ring); outline-offset:6px; border-radius:18px}
.rig-svg{width:100%; height:100%; filter: drop-shadow(0 18px 24px rgba(0,0,0,.35))}
@keyframes fly{
  0%{ transform: translateX(0) rotate(-2deg) }
  40%{ transform: translateX(760px) rotate(1deg) }
  100%{ transform: translateX(1580px) rotate(-2deg) }
}

/* subtle wobble */
#santa{ transform-origin: 340px 120px; animation:wob 1.1s ease-in-out infinite }
#cows{ transform-origin: 760px 190px; animation:wob 0.9s ease-in-out infinite }
#sleigh{ transform-origin: 250px 240px; animation:wob 1.3s ease-in-out infinite }
@keyframes wob{
  0%,100%{ transform: translate(var(--tx,0), var(--ty,0)) rotate(-1.5deg) }
  50%{ transform: translate(0,2px) rotate(1.5deg) }
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  background:var(--btn);
  color:var(--btnText);
  font-weight:900;
  border:0;
  border-radius:18px;
  padding:14px 16px;
  box-shadow: 0 14px 30px rgba(0,0,0,.28);
  cursor:pointer;
  width:min(360px, 100%);
  margin:14px auto 0;
}
.btn:active{transform: translateY(1px)}
.btn.ghost{
  background: transparent;
  color: var(--text);
  border:1px solid rgba(255,255,255,.18);
}
.btn.small{width:auto; padding:10px 12px; border-radius:14px}

.foot{margin-top:14px; text-align:center; color:rgba(234,241,255,.55); font-size:13px}

/* Snow flakes background */
.snow{
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.65) 0 2px, transparent 3px),
    radial-gradient(circle at 35% 40%, rgba(255,255,255,.55) 0 2px, transparent 3px),
    radial-gradient(circle at 70% 25%, rgba(255,255,255,.55) 0 2px, transparent 3px),
    radial-gradient(circle at 80% 65%, rgba(255,255,255,.45) 0 2px, transparent 3px),
    radial-gradient(circle at 20% 75%, rgba(255,255,255,.55) 0 2px, transparent 3px);
  background-size: 260px 260px, 320px 320px, 280px 280px, 360px 360px, 300px 300px;
  animation: snowdrift 10s linear infinite;
  opacity:.55;
}
@keyframes snowdrift{
  0%{ transform: translateY(-20px) }
  100%{ transform: translateY(80px) }
}

/* Wipe overlay (fullscreen inside stage) */
.wipe{
  position:absolute;
  inset:0;
  background: rgba(6,10,26,.88);
  backdrop-filter: blur(8px);
  display:grid;
  grid-template-rows:auto auto 1fr auto;
  gap:10px;
  padding:16px;
  z-index:10;
}
.wipe-title{font-weight:900; letter-spacing:.2px; font-size:18px}
.wipe-sub{color:var(--muted); font-size:14px}
.wipe-canvas{
  width:100%;
  height:100%;
  min-height:320px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.12);
  background: radial-gradient(900px 360px at 50% 40%, rgba(255,255,255,.08), rgba(255,255,255,.03));
  touch-action:none;
}

/* Rescue */
.rescue{display:grid; gap:12px; align-content:start; padding-top:4px}
.dance{
  height:210px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  position:relative;
  overflow:hidden;
}
.dance-santa,.dance-cow,.dance-sleigh{
  position:absolute; top:50%;
  transform:translateY(-50%);
  font-size:56px;
  filter: drop-shadow(0 16px 18px rgba(0,0,0,.35));
  animation: party 0.55s ease-in-out infinite;
}
.dance-santa{left:18%}
.dance-cow{left:46%; animation-delay:.12s}
.dance-sleigh{left:70%; animation-delay:.22s}
@keyframes party{
  0%,100%{ transform: translateY(-50%) rotate(-6deg) scale(1.02) }
  50%{ transform: translateY(calc(-50% - 8px)) rotate(6deg) scale(1.06) }
}

/* Gift */
.gift{display:grid; gap:12px; align-content:start}
.giftbox{
  width:210px; height:210px;
  margin:6px auto 0;
  position:relative;
  border-radius:24px;
  cursor:pointer;
  outline:none;
}
.giftbox:focus{box-shadow: 0 0 0 4px var(--ring)}
.gift-body{
  position:absolute; inset:46px 16px 16px 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.14);
  border-radius:22px;
}
.gift-lid{
  position:absolute; inset:16px 10px 134px 10px;
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.14);
  border-radius:22px;
  transform-origin:center bottom;
}
.gift-ribbon{
  position:absolute; inset:52px 98px 16px 98px;
  background: rgba(255,211,106,.85);
  border-radius:16px;
  box-shadow: 0 10px 22px rgba(0,0,0,.20);
}
.giftbox.shake .gift-lid{ animation: lid 0.35s ease-in-out infinite }
.giftbox.shake{ animation: box 0.25s ease-in-out infinite }
@keyframes box{ 0%,100%{transform:rotate(-2deg)} 50%{transform:rotate(2deg)} }
@keyframes lid{ 0%,100%{transform:rotate(0)} 50%{transform:rotate(-10deg)} }

.tiny{font-size:13px; color:rgba(234,241,255,.65); text-align:center; margin-top:-6px}

/* Modal */
.modal{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  display:grid;
  place-items:center;
  padding:16px;
  z-index:50;
}
.modal-card{
  width:min(560px, 100%);
  background: rgba(9,14,40,.92);
  border:1px solid rgba(255,255,255,.14);
  border-radius:22px;
  box-shadow: 0 28px 80px rgba(0,0,0,.55);
  padding:18px 16px;
}
.modal-text{color:var(--muted); margin-top:8px}
.codebox{
  margin-top:12px;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  background: rgba(255,255,255,.06);
  border:1px dashed rgba(255,255,255,.18);
  padding:12px;
  border-radius:18px;
}
code{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:16px; color:#fff; word-break:break-all}
