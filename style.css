:root{
  --bg1:#061022;
  --bg2:#0b1a33;
  --card: rgba(255,255,255,.08);
  --card2: rgba(255,255,255,.10);
  --text:#eaf2ff;
  --muted: rgba(234,242,255,.72);
  --gold:#ffd56a;
  --shadow: 0 18px 50px rgba(0,0,0,.35);
  --radius: 24px;
  --btn: rgba(255,213,106,.92);
  --btnText:#1b1b1b;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--text);
  background: radial-gradient(1200px 700px at 50% 10%, #1a3a78 0%, var(--bg2) 45%, var(--bg1) 100%);
  overflow-x:hidden;
}

.bg{ position:fixed; inset:0; pointer-events:none; }
.snow{
  position:absolute; inset:0;
  background-image:
    radial-gradient(circle at 10% 10%, rgba(255,255,255,.8) 0 2px, transparent 3px),
    radial-gradient(circle at 30% 40%, rgba(255,255,255,.7) 0 2px, transparent 3px),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,.75) 0 2px, transparent 3px),
    radial-gradient(circle at 85% 65%, rgba(255,255,255,.6) 0 2px, transparent 3px),
    radial-gradient(circle at 55% 80%, rgba(255,255,255,.6) 0 2px, transparent 3px);
  background-size: 260px 260px, 320px 320px, 280px 280px, 340px 340px, 300px 300px;
  animation: snowDrift 9s linear infinite;
  opacity:.55;
}
@keyframes snowDrift{
  from{ transform: translateY(-40px); }
  to{ transform: translateY(220px); }
}

.wrap{
  width:min(980px, 92vw);
  margin: 0 auto;
  padding: 22px 0 48px;
}

.top{
  text-align:center;
  padding: 10px 0 4px;
}
h1{
  margin: 10px 0 6px;
  font-size: clamp(30px, 6vw, 54px);
  letter-spacing:.3px;
}
.gold{ color:var(--gold); text-shadow: 0 10px 22px rgba(0,0,0,.35); }
.sub{
  margin:0;
  font-size: clamp(14px, 2.8vw, 18px);
  color: var(--muted);
}

.speech{
  margin: 14px auto 10px;
  width:min(720px, 95%);
  position:relative;
}
.bubble{
  background: rgba(10,18,40,.72);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 14px 16px;
  line-height:1.25;
  font-size: clamp(14px, 2.8vw, 18px);
}
.bubble-tail{
  width: 18px; height: 18px;
  background: rgba(10,18,40,.72);
  border-left:1px solid rgba(255,255,255,.14);
  border-bottom:1px solid rgba(255,255,255,.14);
  position:absolute;
  left: 30px; bottom: -9px;
  transform: rotate(45deg);
}

.scene{
  margin: 14px auto 0;
  background: var(--card);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position:relative;
  overflow:hidden;
  min-height: 520px;
}

.sleigh{
  position:absolute;
  top: 120px;
  left: -520px; /* start off-screen */
  width:min(920px, 112%);
  background: transparent;
  border:none;
  padding:0;
  cursor:pointer;
  touch-action: manipulation;
  filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
}
.sleigh svg{ width:100%; height:auto; display:block; }

.sleigh:active{ transform: scale(.995); }

.hidden{ display:none !important; }

/* Crash stage */
.crash{
  position:absolute; inset:0;
  display:grid;
  place-items:center;
  padding: 18px;
  background: radial-gradient(900px 500px at 50% 20%, rgba(255,255,255,.08) 0%, rgba(0,0,0,.22) 55%, rgba(0,0,0,.35) 100%);
}
.crashCard{
  width:min(860px, 96%);
  border-radius: var(--radius);
  background: rgba(10,18,40,.78);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: var(--shadow);
  padding: 18px;
}
.crashTitle{
  font-weight: 800;
  letter-spacing:.4px;
  font-size: 22px;
}
.crashSub{
  margin: 6px 0 14px;
  color: var(--muted);
}

.wipeWrap{
  position:relative;
  border-radius: 18px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.15);
}
#wipeCanvas{
  display:block;
  width:100%;
  height:auto;
  touch-action: none; /* allow drawing */
}
.under{
  position:absolute; inset:0;
  display:grid;
  place-items:center;
  padding: 16px;
}
.underInner{
  display:flex;
  gap: 12px;
  align-items:center;
  width:min(720px, 92%);
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,.25);
}
.miniSanta{
  width: 88px; height: 88px;
  border-radius: 22px;
  background:
    radial-gradient(circle at 35% 35%, #f2c6a8 0 28px, transparent 29px),
    radial-gradient(circle at 40% 65%, #ffffff 0 32px, transparent 33px),
    radial-gradient(circle at 50% 20%, #d32f2f 0 30px, transparent 31px),
    radial-gradient(circle at 63% 20%, #ffffff 0 10px, transparent 11px),
    radial-gradient(circle at 42% 38%, #1e1e1e 0 3px, transparent 4px),
    radial-gradient(circle at 54% 38%, #1e1e1e 0 3px, transparent 4px),
    radial-gradient(circle at 50% 82%, #ef5350 0 32px, transparent 33px);
  box-shadow: 0 12px 20px rgba(0,0,0,.25);
}
.underLine{ line-height:1.2; }
.underText{ font-size: 15px; color: var(--text); }
.underText .underLine:nth-child(2){ color: var(--muted); margin-top:6px; }

.btn{
  border:none;
  border-radius: 999px;
  padding: 12px 16px;
  background: rgba(255,255,255,.12);
  color: var(--text);
  font-weight: 800;
  letter-spacing:.3px;
  cursor:pointer;
  box-shadow: 0 12px 24px rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.16);
}
.btn:active{ transform: translateY(1px); }
.btn.primary{
  background: var(--btn);
  color: var(--btnText);
  border: 1px solid rgba(0,0,0,.12);
}
.btn.big{
  width:min(520px, 92%);
  padding: 14px 18px;
  font-size: 18px;
}

/* Gift stage */
.gift{
  position:absolute; inset:0;
  display:grid;
  place-items:center;
  padding: 18px;
}
.giftCard{
  width:min(860px, 96%);
  background: rgba(10,18,40,.78);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  padding: 18px;
  text-align:center;
}

.giftTop{ position:relative; width:min(700px, 95%); margin:0 auto 10px; }
.bubble.small{ font-size: 15px; padding: 12px 14px; }
.smallTail{
  left: 55px;
  bottom: -9px;
}

.present{
  width: 210px;
  height: 190px;
  margin: 18px auto 8px;
  position:relative;
  filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
}
.present .box{
  position:absolute; left:0; right:0; bottom:0;
  height: 140px;
  border-radius: 18px;
  background: #c62828;
}
.present .lid{
  position:absolute; left:-4px; right:-4px; top: 16px;
  height: 55px;
  border-radius: 18px;
  background: #e53935;
}
.present .ribbon{
  position:absolute; inset:0;
  background:
    linear-gradient(90deg, transparent 0 44%, #ffd34d 44% 56%, transparent 56% 100%),
    linear-gradient(180deg, transparent 0 44%, #ffd34d 44% 56%, transparent 56% 100%);
  border-radius: 18px;
  opacity:.95;
}
.hint{ margin: 6px 0 14px; color: var(--muted); }

.modal{
  position:fixed; inset:0;
  display:grid;
  place-items:center;
  padding: 18px;
  background: rgba(0,0,0,.45);
  z-index: 50;
}
.modalCard{
  width:min(560px, 96%);
  background: rgba(10,18,40,.92);
  border: 1px solid rgba(255,255,255,.16);
  box-shadow: var(--shadow);
  border-radius: 22px;
  padding: 18px;
  text-align:left;
}
.codeRow{
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:space-between;
  margin: 12px 0 8px;
}
code{
  flex: 1;
  display:block;
  padding: 12px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.08);
  border: 1px dashed rgba(255,255,255,.18);
  font-size: 16px;
  letter-spacing:.8px;
  overflow:auto;
}
.tiny{ margin: 6px 0 12px; color: var(--muted); font-size: 13px; }

@media (max-width: 520px){
  .sleigh{ top: 140px; width: 125%; left: -560px; }
  .scene{ min-height: 560px; }
}
