:root{
  --bg1:#071226;
  --bg2:#0b1f3b;
  --card: rgba(255,255,255,.08);
  --txt: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.72);
  --accent: #ffd36b;
  --good: #6dff9a;
  --danger:#ff6d8a;
  --shadow: 0 20px 60px rgba(0,0,0,.45);
  --round: 22px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--txt);
  background: radial-gradient(1200px 800px at 20% 0%, #123a6b 0%, transparent 60%),
              radial-gradient(1000px 700px at 90% 20%, #3b1d63 0%, transparent 55%),
              linear-gradient(160deg, var(--bg1), var(--bg2));
  overflow-x:hidden;
}

.app{min-height:100%; position:relative; padding:18px}
.stage{max-width:980px; margin:0 auto; padding:10px}

.scene{display:none; gap:16px}
.scene--active{display:block}

.headline{
  background: var(--card);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: var(--round);
  box-shadow: var(--shadow);
  padding: 14px 16px;
  backdrop-filter: blur(8px);
}
.h1{font-size: clamp(22px, 4vw, 34px); font-weight: 800; letter-spacing:.2px}
.h2{font-size: clamp(16px, 2.8vw, 20px); color:var(--muted); margin-top:4px}
.hint{margin:10px 0 0; color:var(--muted)}
.name{color:var(--accent); text-shadow: 0 10px 30px rgba(255,211,107,.25)}
.footerNote{margin:10px 4px 0; color: rgba(255,255,255,.65); font-size: 13px}

.btn{
  appearance:none;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.10);
  color:var(--txt);
  padding: 12px 14px;
  border-radius: 16px;
  font-weight: 700;
  cursor:pointer;
  box-shadow: 0 16px 40px rgba(0,0,0,.30);
  backdrop-filter: blur(6px);
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0px) scale(.99)}
.btn--small{padding:10px 12px; border-radius: 14px; font-size: 14px}

.snow{
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 10% 10%, rgba(255,255,255,.9) 0 2px, transparent 3px),
    radial-gradient(circle at 30% 40%, rgba(255,255,255,.7) 0 1.5px, transparent 3px),
    radial-gradient(circle at 60% 20%, rgba(255,255,255,.8) 0 1.8px, transparent 3px),
    radial-gradient(circle at 80% 60%, rgba(255,255,255,.7) 0 1.4px, transparent 3px);
  background-size: 260px 260px, 320px 320px, 280px 280px, 360px 360px;
  animation: snowDrift 6s linear infinite;
  opacity:.65;
}
@keyframes snowDrift{
  from{transform: translateY(-10px)}
  to{transform: translateY(40px)}
}

/* ========= INTRO: fly zone ========= */
.flyZone{
  position:relative;
  margin-top:14px;
  height: 380px;
  border-radius: var(--round);
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  overflow:hidden;
  box-shadow: var(--shadow);
}

.tapPulse{
  position:absolute;
  inset:auto 18px 18px auto;
  width:18px; height:18px;
  border-radius:999px;
  background: rgba(255,211,107,.9);
  box-shadow: 0 0 0 0 rgba(255,211,107,.5);
  animation: pulse 1.2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,211,107,.45)}
  70%{box-shadow:0 0 0 18px rgba(255,211,107,0)}
  100%{box-shadow:0 0 0 0 rgba(255,211,107,0)}
}

.santaCow{
  position:absolute;
  left:-340px;
  top: 120px;
  width: 320px;
  height: 200px;
  transform: scale(1.1);
  cursor:pointer;
  outline:none;
  animation: flyIn 6.2s linear infinite;
}
@keyframes flyIn{
  0%{transform: translateX(0) translateY(0) rotate(-2deg) scale(1.05)}
  35%{transform: translateX(540px) translateY(-28px) rotate(2deg) scale(1.08)}
  70%{transform: translateX(980px) translateY(8px) rotate(-1deg) scale(1.06)}
  100%{transform: translateX(1280px) translateY(0) rotate(1deg) scale(1.05)}
}
.santaCow:hover{filter: drop-shadow(0 18px 40px rgba(0,0,0,.35))}
.santaCow:active{transform: scale(1.02)}

.speech{
  position:absolute;
  left: 20px;
  top: -16px;
  padding: 10px 12px;
  border-radius: 16px;
  background: rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.16);
  font-weight: 700;
  font-size: 14px;
  transform: rotate(-2deg);
  backdrop-filter: blur(6px);
}

/* ========= Cow (comic div-art) ========= */
.cow{ position:absolute; left:0; top:40px; width: 240px; height: 150px; }
.cowBody{
  position:absolute; left:40px; top:40px;
  width: 160px; height: 88px;
  background: #f2f2f2;
  border: 4px solid rgba(0,0,0,.35);
  border-radius: 60px;
  transform-origin: 40% 70%;
  animation: wobble 0.6s ease-in-out infinite;
}
@keyframes wobble{
  0%{transform: rotate(-2deg) translateY(0)}
  50%{transform: rotate(2deg) translateY(2px)}
  100%{transform: rotate(-2deg) translateY(0)}
}
.cowSpot{position:absolute; background:#222; border-radius: 18px; opacity:.9}
.cowSpot.s1{width:34px; height:22px; left:28px; top:20px; transform: rotate(-12deg)}
.cowSpot.s2{width:42px; height:26px; left:92px; top:42px; transform: rotate(10deg)}

.cowHead{
  position:absolute; left:0; top:38px;
  width: 70px; height: 58px;
  background:#f2f2f2;
  border: 4px solid rgba(0,0,0,.35);
  border-radius: 22px;
  transform-origin: 70% 50%;
  animation: headBob .55s ease-in-out infinite;
}
@keyframes headBob{
  0%{transform: rotate(4deg)}
  50%{transform: rotate(-4deg)}
  100%{transform: rotate(4deg)}
}
.cowEye{position:absolute; width:10px; height:10px; background:#111; border-radius:999px; left:38px; top:18px}
.cowNose{position:absolute; width:34px; height:22px; background:#ffb2c3; border-radius: 14px; left:22px; top:30px; border:3px solid rgba(0,0,0,.28)}
.cowHorn{position:absolute; width:16px; height:18px; background:#d9c9a1; border-radius: 8px; top:-10px; border:3px solid rgba(0,0,0,.25)}
.cowHorn.horn1{left:6px; transform: rotate(-12deg)}
.cowHorn.horn2{left:28px; transform: rotate(14deg)}

.cowHat{
  position:absolute; left:18px; top:12px;
  width: 46px; height: 34px;
  background: #d73333;
  border-radius: 18px 18px 18px 6px;
  border:4px solid rgba(0,0,0,.25);
  transform: rotate(12deg);
}
.cowHat::after{
  content:"";
  position:absolute; right:-10px; top:-10px;
  width:18px; height:18px; background:#fff;
  border-radius:999px; border:4px solid rgba(0,0,0,.18);
}
.cowLeg{
  position:absolute; width:14px; height:34px; background:#f2f2f2;
  border:4px solid rgba(0,0,0,.28); border-radius: 10px;
  top: 78px;
}
.cowLeg.l1{left:54px}
.cowLeg.l2{left:84px}
.cowLeg.l3{left:136px}
.cowLeg.l4{left:166px}
.cowTail{
  position:absolute; width:30px; height:10px;
  left: 190px; top: 66px;
  border:4px solid rgba(0,0,0,.25);
  border-color: rgba(0,0,0,.25) transparent transparent transparent;
  border-radius: 20px;
  transform: rotate(10deg);
  animation: tail .4s ease-in-out infinite;
}
@keyframes tail{
  0%{transform: rotate(10deg)}
  50%{transform: rotate(-10deg)}
  100%{transform: rotate(10deg)}
}
.udder{
  position:absolute; left:74px; top:62px;
  width: 56px; height: 34px;
  background:#ffb2c3;
  border:4px solid rgba(0,0,0,.25);
  border-radius: 18px;
  transform-origin: 50% 40%;
  animation: udder .38s ease-in-out infinite;
}
@keyframes udder{
  0%{transform: rotate(-2deg)}
  50%{transform: rotate(3deg)}
  100%{transform: rotate(-2deg)}
}
.teat{position:absolute; width:10px; height:16px; background:#ff89a7; border-radius: 8px; border:3px solid rgba(0,0,0,.18); bottom:-10px}
.teat.t1{left:6px}
.teat.t2{left:18px}
.teat.t3{left:32px}
.teat.t4{left:44px}

/* ========= Santa ========= */
.santa{ position:absolute; left:128px; top:0; width: 170px; height: 180px; pointer-events:none; }
.santaHat{
  position:absolute; left:82px; top:10px;
  width: 60px; height: 44px;
  background:#d73333;
  border-radius: 22px 22px 22px 10px;
  border:4px solid rgba(0,0,0,.25);
  transform: rotate(-10deg);
  animation: hatWiggle .5s ease-in-out infinite;
}
@keyframes hatWiggle{
  0%{transform: rotate(-12deg)}
  50%{transform: rotate(-6deg)}
  100%{transform: rotate(-12deg)}
}
.santaHat::after{
  content:"";
  position:absolute; right:-10px; top:-12px;
  width:18px; height:18px; background:#fff;
  border-radius:999px; border:4px solid rgba(0,0,0,.18);
}
.santaHead{
  position:absolute; left:58px; top:46px;
  width: 76px; height: 70px;
  background:#f3c7a8;
  border-radius: 30px;
  border:4px solid rgba(0,0,0,.28);
  transform-origin: 50% 70%;
  animation: headBob .55s ease-in-out infinite;
}
.santaBrow{position:absolute; left:10px; top:14px; width:56px; height:10px; border-radius: 10px; background: rgba(0,0,0,.15)}
.santaGlasses{
  position:absolute; left:10px; top:24px;
  width: 56px; height: 18px;
  border:3px solid rgba(0,0,0,.35);
  border-radius: 12px;
}
.santaGlasses::before, .santaGlasses::after{
  content:""; position:absolute; top:2px; width:20px; height:12px;
  border:3px solid rgba(0,0,0,.35);
  border-radius: 10px;
  background: rgba(255,255,255,.10);
}
.santaGlasses::before{left:2px}
.santaGlasses::after{right:2px}
.santaBeard{
  position:absolute; left:6px; top:38px;
  width: 64px; height: 40px;
  background:#fff;
  border-radius: 0 0 30px 30px;
  border:4px solid rgba(0,0,0,.18);
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
  animation: beard 0.35s ease-in-out infinite;
}
@keyframes beard{
  0%{transform: rotate(1deg)}
  50%{transform: rotate(-1deg)}
  100%{transform: rotate(1deg)}
}
.santaBody{
  position:absolute; left:44px; top:104px;
  width: 112px; height: 70px;
  transform-origin: 50% 0%;
  animation: wobble 0.55s ease-in-out infinite;
}
.santaBelly{
  position:absolute; inset:0;
  background:#f3c7a8;
  border-radius: 40px;
  border:4px solid rgba(0,0,0,.28);
}
.santaShorts{
  position:absolute; left:10px; top:36px;
  width: 92px; height: 36px;
  background:#2b79ff;
  border-radius: 0 0 28px 28px;
  border:4px solid rgba(0,0,0,.25);
}
.santaArm{position:absolute; width:30px; height:14px; background:#f3c7a8; border-radius: 12px; border:4px solid rgba(0,0,0,.25); top:18px}
.santaArm.a1{left:-10px; transform: rotate(-18deg); animation: arm .4s ease-in-out infinite}
.santaArm.a2{right:-10px; transform: rotate(18deg); animation: arm .45s ease-in-out infinite}
@keyframes arm{
  0%{transform: rotate(-14deg)}
  50%{transform: rotate(14deg)}
  100%{transform: rotate(-14deg)}
}

/* ========= CRASH / SNOW WIPE ========= */
.snowStage{
  margin-top:14px;
  position:relative;
  height: 420px;
  border-radius: var(--round);
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  overflow:hidden;
  box-shadow: var(--shadow);
}
.buried{
  position:absolute;
  left: 50%;
  top: 54%;
  transform: translate(-50%,-50%);
  width: 360px;
  height: 220px;
  opacity: .95;
}
.miniSanta, .miniCow{
  position:absolute;
  filter: drop-shadow(0 20px 50px rgba(0,0,0,.35));
}
.miniSanta{left: 190px; top: 56px; width: 120px; height: 140px}
.miniHat{position:absolute; left:54px; top:0; width:56px; height:44px; background:#d73333; border-radius: 20px; border:4px solid rgba(0,0,0,.25)}
.miniHead{position:absolute; left:46px; top:40px; width:64px; height:56px; background:#f3c7a8; border-radius: 22px; border:4px solid rgba(0,0,0,.28)}
.miniBeard{position:absolute; left:40px; top:74px; width:74px; height:56px; background:#fff; border-radius: 0 0 28px 28px; border:4px solid rgba(0,0,0,.18)}
.miniBody{position:absolute; left:26px; top:92px; width:88px; height:46px; background:#2b79ff; border-radius: 24px; border:4px solid rgba(0,0,0,.25)}

.miniCow{left: 40px; top: 90px; width: 160px; height: 110px}
.miniCowBody{position:absolute; left:0; top:18px; width:160px; height:76px; background:#f2f2f2; border-radius: 46px; border:4px solid rgba(0,0,0,.35)}
.miniCowHat{position:absolute; left:18px; top:0; width:46px; height:34px; background:#d73333; border-radius: 18px; border:4px solid rgba(0,0,0,.25)}
.miniUdder{position:absolute; left:74px; top:64px; width:52px; height:30px; background:#ffb2c3; border-radius: 16px; border:4px solid rgba(0,0,0,.25)}

.snowCanvas{
  position:absolute; inset:0;
  width:100%; height:100%;
  touch-action:none;
  cursor: crosshair;
}

/* ========= THANKS ========= */
.thanksStage{
  margin-top:14px;
  height: 360px;
  border-radius: var(--round);
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  overflow:hidden;
  box-shadow: var(--shadow);
  display:grid;
  place-items:center;
}
.danceDuo{
  width: 320px;
  height: 220px;
  position:relative;
  animation: megaWobble .6s ease-in-out infinite;
}
@keyframes megaWobble{
  0%{transform: rotate(-2deg) translateY(0)}
  50%{transform: rotate(2deg) translateY(4px)}
  100%{transform: rotate(-2deg) translateY(0)}
}
.danceCow{
  position:absolute; left:18px; top:90px;
  width: 220px; height: 90px;
  background:#f2f2f2;
  border:4px solid rgba(0,0,0,.35);
  border-radius: 50px;
}
.danceCow::before{
  content:"";
  position:absolute; left:18px; top:-24px;
  width: 54px; height: 40px;
  background:#d73333;
  border-radius: 18px;
  border:4px solid rgba(0,0,0,.25);
  transform: rotate(10deg);
}
.danceCow::after{
  content:"";
  position:absolute; left:110px; top:52px;
  width: 70px; height: 44px;
  background:#ffb2c3;
  border-radius: 20px;
  border:4px solid rgba(0,0,0,.25);
  animation: udder .34s ease-in-out infinite;
}
.danceSanta{
  position:absolute; left:190px; top:40px;
  width: 110px; height: 130px;
  border-radius: 30px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 30px 80px rgba(0,0,0,.35);
}
.danceSanta::before{
  content:"";
  position:absolute; left:20px; top:16px;
  width: 70px; height: 70px;
  background:#f3c7a8;
  border-radius: 26px;
  border:4px solid rgba(0,0,0,.28);
}
.danceSanta::after{
  content:"";
  position:absolute; left:14px; top:54px;
  width: 82px; height: 62px;
  background:#fff;
  border-radius: 0 0 30px 30px;
  border:4px solid rgba(0,0,0,.18);
  animation: beard .35s ease-in-out infinite;
}

/* ========= GIFT ========= */
.giftStage{
  margin-top:14px;
  height: 420px;
  border-radius: var(--round);
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  overflow:hidden;
  box-shadow: var(--shadow);
  display:grid;
  place-items:center;
  padding: 10px;
  position:relative;
}

.giftBox{
  width: 170px;
  height: 170px;
  position:relative;
  cursor:pointer;
  outline:none;
  animation: giftWiggle 1.2s ease-in-out infinite;
}
@keyframes giftWiggle{
  0%{transform: rotate(-2deg) translateY(0)}
  50%{transform: rotate(2deg) translateY(4px)}
  100%{transform: rotate(-2deg) translateY(0)}
}
.giftBody{
  position:absolute; left:0; top:40px;
  width: 170px; height: 130px;
  background: rgba(255,255,255,.14);
  border:1px solid rgba(255,255,255,.20);
  border-radius: 18px;
}
.giftLid{
  position:absolute; left:-6px; top:18px;
  width: 182px; height: 46px;
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.24);
  border-radius: 18px;
}
.giftRibbonV{
  position:absolute; left:78px; top:18px;
  width: 16px; height: 152px;
  background: rgba(255,211,107,.9);
  border-radius: 10px;
}
.giftRibbonH{
  position:absolute; left:0; top:90px;
  width: 170px; height: 16px;
  background: rgba(255,211,107,.9);
  border-radius: 10px;
}
.giftBow{
  position:absolute; left:62px; top:0px;
  width: 46px; height: 36px;
  border-radius: 18px;
  background: rgba(255,211,107,.9);
  filter: drop-shadow(0 18px 40px rgba(0,0,0,.25));
}
.giftGlow{
  position:absolute; inset:-40px;
  background: radial-gradient(circle, rgba(109,255,154,.18), transparent 60%);
  opacity:0;
  transition: opacity .25s ease;
}
.giftBox:hover .giftGlow{opacity:1}

.reveal{
  position:absolute;
  bottom: 16px;
  left: 16px;
  right: 16px;
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(255,255,255,.16);
  border-radius: var(--round);
  padding: 14px 14px;
  backdrop-filter: blur(8px);
  box-shadow: var(--shadow);
  transform: translateY(14px);
  opacity: 0;
  pointer-events:none;
  transition: opacity .25s ease, transform .25s ease;
}
.reveal--show{
  opacity:1;
  transform: translateY(0);
  pointer-events:auto;
}
.revealTitle{font-weight:900; letter-spacing:.2px; margin-bottom:10px}
.codeRow{
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
}
code{
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.10);
  border: 1px dashed rgba(255,255,255,.22);
  font-weight: 800;
  letter-spacing: .8px;
  user-select: all;
}
.copyMsg{margin-top:8px; color: var(--good); font-weight: 800; min-height: 18px}
.smallPrint{margin-top:6px; color: rgba(255,255,255,.65); font-size: 13px}

/* crash effect state */
.crash{
  animation: crash 850ms ease-in forwards;
}
@keyframes crash{
  0%{transform: translateX(0) translateY(0) rotate(0deg) scale(1.05)}
  65%{transform: translateX(420px) translateY(120px) rotate(18deg) scale(1.02)}
  100%{transform: translateX(520px) translateY(520px) rotate(42deg) scale(.9); opacity:0}
  }
