:root{
  --bg1:#0b1530;
  --bg2:#0a2a4a;
  --card:#0f1f3aa8;
  --text:#f3f6ff;
  --muted:#cfe0ffcc;
  --btn:#ffffff;
  --btnText:#0b1530;
  --shadow: 0 18px 50px rgba(0,0,0,.35);
  --round: 22px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background: radial-gradient(1200px 800px at 20% 0%, #123b7a 0%, var(--bg1) 45%, #070e1c 100%);
  overflow:hidden;
}

.app{
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

.screen{
  width:min(560px, 92vw);
  display:none;
}
.screen.active{display:block}

.card{
  background:var(--card);
  border:1px solid rgba(255,255,255,.10);
  border-radius:var(--round);
  box-shadow:var(--shadow);
  padding:18px 18px 16px;
  backdrop-filter: blur(10px);
}

h1,h2{margin:6px 0 10px}
p{margin:10px 0;color:var(--muted);line-height:1.35}

.hint{opacity:.9;font-size:.92rem;margin-top:10px}

.btn{
  width:100%;
  border:0;
  border-radius:16px;
  padding:14px 16px;
  background:var(--btn);
  color:var(--btnText);
  font-weight:800;
  letter-spacing:.2px;
  cursor:pointer;
  box-shadow: 0 14px 26px rgba(0,0,0,.25);
  transform: translateZ(0);
}
.btn:disabled{opacity:.45; cursor:not-allowed}
.btn.small{width:auto; padding:10px 12px; border-radius:14px; margin-top:10px}

.bubble{
  display:inline-block;
  padding:10px 12px;
  border-radius:18px;
  background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.14);
  color:var(--text);
  box-shadow: 0 10px 22px rgba(0,0,0,.20);
  max-width:100%;
}
.bubble.left{border-bottom-left-radius:6px}
.bubble.right{border-bottom-right-radius:6px; float:right}
.bubble:after{content:""; display:block; clear:both}

/* Szene (Baum + Santa + Geschenk) */
.scene, .finalScene{
  margin:14px 0 10px;
  position:relative;
  height:220px;
  border-radius:18px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
}
.scene{height:240px}
.finalScene{height:240px; margin-top:14px}

.ground{
  position:absolute;
  left:0; right:0; bottom:0;
  height:46px;
  background: linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,.05));
}

/* Baum */
.tree{
  position:absolute;
  left:16px;
  bottom:26px;
  width:170px;
  height:190px;
  filter: drop-shadow(0 16px 18px rgba(0,0,0,.35));
  animation: wobble 2.6s ease-in-out infinite;
}
.tree.big{left:18px; bottom:18px; width:200px; height:220px}
.tree.tap{
  position:relative;
  left:auto; bottom:auto;
  margin:0 auto;
  width:min(320px, 78vw);
  height:340px;
  animation: wobble 2.2s ease-in-out infinite;
}

.tree .layer{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  width:0; height:0;
  border-left: 90px solid transparent;
  border-right: 90px solid transparent;
  border-bottom: 78px solid rgba(10, 140, 70, .92);
  filter: brightness(1.05);
}
.tree.big .layer{border-left-width:105px;border-right-width:105px;border-bottom-width:88px}
.tree.tap .layer{border-left-width:140px;border-right-width:140px;border-bottom-width:120px}

.tree .l1{top:12px}
.tree .l2{top:48px; filter:brightness(.98)}
.tree .l3{top:86px; filter:brightness(.93)}
.tree.big .l1{top:14px}
.tree.big .l2{top:58px}
.tree.big .l3{top:104px}
.tree.tap .l1{top:16px}
.tree.tap .l2{top:92px}
.tree.tap .l3{top:168px}

.tree .trunk{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:-2px;
  width:38px; height:50px;
  border-radius:10px;
  background: rgba(120,70,30,.95);
  box-shadow: inset 0 -10px 0 rgba(0,0,0,.18);
}
.tree.big .trunk{width:44px;height:58px}
.tree.tap .trunk{width:58px;height:74px; bottom:0}

/* Stern */
.tree .star{
  position:absolute;
  left:50%;
  top:-2px;
  transform:translateX(-50%) rotate(10deg);
  width:34px; height:34px;
  background: radial-gradient(circle at 30% 30%, #fff6b8, #ffd34a 55%, #ffb300);
  clip-path: polygon(50% 0%, 62% 34%, 98% 36%, 70% 58%, 80% 92%, 50% 72%, 20% 92%, 30% 58%, 2% 36%, 38% 34%);
  box-shadow: 0 0 20px rgba(255,215,80,.6);
}
.tree.big .star{width:40px;height:40px}
.tree.tap .star{width:52px;height:52px; top:2px}

/* Kugeln (Deko) */
.orn{
  position:absolute;
  width:16px; height:16px;
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #fff, rgba(255,0,0,.9) 55%, rgba(120,0,0,.95));
  box-shadow: 0 10px 18px rgba(0,0,0,.25);
}
.tree .o1{left:55px; top:56px}
.tree .o2{left:98px; top:76px; background: radial-gradient(circle at 30% 30%, #fff, rgba(255,220,0,.95) 55%, rgba(160,120,0,.95))}
.tree .o3{left:72px; top:102px; background: radial-gradient(circle at 30% 30%, #fff, rgba(0,180,255,.9) 55%, rgba(0,80,140,.95))}
.tree .o4{left:115px; top:112px}
.tree .o5{left:84px; top:132px; background: radial-gradient(circle at 30% 30%, #fff, rgba(255,0,200,.9) 55%, rgba(120,0,100,.95))}

.tree.big .o1{left:66px; top:68px}
.tree.big .o2{left:120px; top:90px}
.tree.big .o3{left:86px; top:120px}
.tree.big .o4{left:140px; top:132px}
.tree.big .o5{left:102px; top:156px}

/* Tap-Kugeln als Buttons */
.ornBtn{
  position:absolute;
  width:30px;height:30px;
  border:0;
  border-radius:50%;
  cursor:pointer;
  background: radial-gradient(circle at 30% 30%, #fff, rgba(255,60,60,.95) 55%, rgba(120,0,0,.95));
  box-shadow: 0 16px 22px rgba(0,0,0,.30);
  transform: scale(1);
}
.ornBtn:active{transform: scale(.94)}
.ornBtn.found{opacity:.15; filter:saturate(.2); cursor:default; box-shadow:none}
.tree.tap .ornBtn.o1{left:38%; top:32%}
.tree.tap .ornBtn.o2{left:56%; top:40%; background: radial-gradient(circle at 30% 30%, #fff, rgba(255,220,0,.95) 55%, rgba(160,120,0,.95))}
.tree.tap .ornBtn.o3{left:45%; top:54%; background: radial-gradient(circle at 30% 30%, #fff, rgba(0,180,255,.92) 55%, rgba(0,80,140,.95))}
.tree.tap .ornBtn.o4{left:60%; top:60%}
.tree.tap .ornBtn.o5{left:48%; top:72%; background: radial-gradient(circle at 30% 30%, #fff, rgba(255,0,200,.9) 55%, rgba(120,0,100,.95))}

/* Santa */
.santa{
  position:absolute;
  right:20px;
  bottom:34px;
  width:120px;
  height:170px;
  filter: drop-shadow(0 16px 18px rgba(0,0,0,.35));
  animation: bounce 1.8s ease-in-out infinite;
}
.santa.big{right:18px; bottom:22px; width:140px; height:200px}
.santa .hat{
  position:absolute; left:34px; top:0;
  width:0;height:0;
  border-left:28px solid transparent;
  border-right:28px solid transparent;
  border-bottom:48px solid rgba(220,40,40,.95);
  transform: rotate(-12deg);
}
.santa .face{
  position:absolute; left:42px; top:38px;
  width:46px; height:46px;
  border-radius:50%;
  background: rgba(255,220,190,.95);
}
.santa .beard{
  position:absolute; left:36px; top:56px;
  width:58px; height:60px;
  border-radius: 18px 18px 30px 30px;
  background: rgba(255,255,255,.95);
  box-shadow: inset 0 -10px 0 rgba(0,0,0,.06);
}
.santa .body{
  position:absolute; left:26px; top:92px;
  width:78px; height:74px;
  border-radius: 18px;
  background: rgba(220,40,40,.95);
  box-shadow: inset 0 -10px 0 rgba(0,0,0,.10);
}

/* Geschenk */
.gift{
  position:absolute;
  left:200px;
  bottom:30px;
  width:76px;
  height:56px;
  border-radius:14px;
  background: rgba(30,140,230,.95);
  box-shadow: inset 0 -10px 0 rgba(0,0,0,.14), 0 18px 24px rgba(0,0,0,.25);
  animation: wiggle 2.0s ease-in-out infinite;
}
.gift.big{left:240px; bottom:24px; width:92px; height:66px}
.gift .ribbon{
  position:absolute; left:50%; top:0;
  transform:translateX(-50%);
  width:14px; height:100%;
  background: rgba(255,210,70,.95);
}
.gift .ribbon::after{
  content:"";
  position:absolute; left:50%; top:16px;
  transform:translateX(-50%);
  width:100%; height:14px;
  background: rgba(255,210,70,.95);
  border-radius:10px;
}

/* Wipe */
.wipeWrap{
  position:relative;
  height:min(420px, 60vh);
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
}
.underScene{
  position:absolute; inset:0;
}
#wipeCanvas{
  position:absolute; inset:0;
  width:100%; height:100%;
  touch-action:none;
}
.progress{
  position:absolute;
  left:12px; right:12px; bottom:12px;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:14px;
  background: rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.12);
}
.bar{flex:1; height:10px; border-radius:999px; background: rgba(255,255,255,.12); overflow:hidden}
.barFill{height:100%; width:0%; background: rgba(255,255,255,.85)}
.pct{min-width:48px; font-weight:800}

/* Tap Scene */
.tapScene{
  margin-top:10px;
  border-radius:18px;
  padding:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
}
.score{
  margin-top:10px;
  text-align:center;
  font-weight:800;
}

/* Code Reveal */
.codeBox{
  margin-top:10px;
  border-radius:18px;
  padding:14px;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
}
.codeLabel{opacity:.9; font-weight:700; margin-bottom:6px}
.code{
  font-size:1.5rem;
  font-weight:900;
  letter-spacing:.18em;
  padding:12px 10px;
  border-radius:14px;
  background: rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.10);
}
.copied{display:none; margin-top:8px; font-weight:800}
.copied.show{display:block}

/* Schnee Hintergrund */
.snow{
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.9) 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.7) 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.5) 1px, transparent 2px);
  background-size: 80px 80px, 120px 120px, 160px 160px;
  background-position: 0 0, 30px 40px, 60px 20px;
  opacity:.35;
  animation: snowMove 10s linear infinite;
}

@keyframes snowMove{
  from{transform:translateY(-40px)}
  to{transform:translateY(40px)}
}
@keyframes wobble{
  0%,100%{transform:translateX(0) rotate(-1.2deg)}
  50%{transform:translateX(0) rotate(1.6deg)}
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-7px)}
}
@keyframes wiggle{
  0%,100%{transform:rotate(-1.5deg)}
  50%{transform:rotate(2.5deg)}
}
